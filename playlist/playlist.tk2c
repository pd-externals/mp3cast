// ########### playlist procedures -- ydegoyon@free.fr #########
sys_gui("proc playlist_apply {id} {\n");
// strip "." from the TK id to make a variable name suffix
sys_gui("set vid [string trimleft $id .]\n");
// for each variable, make a local variable to hold its name...
sys_gui("set var_graph_extension [concat graph_extension_$vid]\n");
sys_gui("global $var_graph_extension\n");
sys_gui("set var_graph_width [concat graph_width_$vid]\n");
sys_gui("global $var_graph_width\n");
sys_gui("set var_graph_height [concat graph_height$vid]\n");
sys_gui("global $var_graph_height\n");
sys_gui("set var_graph_font [concat graph_font$vid]\n");
sys_gui("global $var_graph_font\n");
sys_gui("set var_graph_bgcolor [concat graph_bgcolor$vid]\n");
sys_gui("global $var_graph_bgcolor\n");
sys_gui("set var_graph_sbcolor [concat graph_sbcolor$vid]\n");
sys_gui("global $var_graph_sbcolor\n");
sys_gui("set var_graph_fgcolor [concat graph_fgcolor$vid]\n");
sys_gui("global $var_graph_fgcolor\n");
sys_gui("set var_graph_secolor [concat graph_secolor$vid]\n");
sys_gui("global $var_graph_secolor\n");
sys_gui("set cmd [concat $id dialog [eval concat $$var_graph_extension] [eval concat $$var_graph_width] [eval concat $$var_graph_height] [eval concat $$var_graph_font] [eval concat $$var_graph_bgcolor] [eval concat $$var_graph_sbcolor] [eval concat $$var_graph_fgcolor] [eval concat $$var_graph_secolor] \\;]\n");
// puts stderr $cmd
sys_gui("pd $cmd\n");
sys_gui("}\n");
sys_gui("proc playlist_cancel {id} {\n");
sys_gui("set cmd [concat $id cancel \\;]\n");
// puts stderr $cmd
sys_gui("pd $cmd\n");
sys_gui("}\n");
sys_gui("proc playlist_ok {id} {\n");
sys_gui("playlist_apply $id\n");
sys_gui("playlist_cancel $id\n");
sys_gui("}\n");
sys_gui("proc pdtk_playlist_dialog {id extension width height font bgcolor sbcolor fgcolor secolor} {\n");
sys_gui("set vid [string trimleft $id .]\n");
sys_gui("set var_graph_extension [concat graph_extension_$vid]\n");
sys_gui("global $var_graph_extension\n");
sys_gui("set var_graph_width [concat graph_width_$vid]\n");
sys_gui("global $var_graph_width\n");
sys_gui("set var_graph_height [concat graph_height$vid]\n");
sys_gui("global $var_graph_height\n");
sys_gui("set var_graph_font [concat graph_font$vid]\n");
sys_gui("global $var_graph_font\n");
sys_gui("set var_graph_bgcolor [concat graph_bgcolor$vid]\n");
sys_gui("global $var_graph_bgcolor\n");
sys_gui("set var_graph_sbcolor [concat graph_sbcolor$vid]\n");
sys_gui("global $var_graph_sbcolor\n");
sys_gui("set var_graph_fgcolor [concat graph_fgcolor$vid]\n");
sys_gui("global $var_graph_fgcolor\n");
sys_gui("set var_graph_secolor [concat graph_secolor$vid]\n");
sys_gui("global $var_graph_secolor\n");
sys_gui("set $var_graph_extension $extension\n");
sys_gui("set $var_graph_width $width\n");
sys_gui("set $var_graph_height $height\n");
sys_gui("set $var_graph_font $font\n");
sys_gui("set $var_graph_bgcolor $bgcolor\n");
sys_gui("set $var_graph_sbcolor $sbcolor\n");
sys_gui("set $var_graph_fgcolor $fgcolor\n");
sys_gui("set $var_graph_secolor $secolor\n");
sys_gui("toplevel $id\n");
sys_gui("wm title $id {playlist}\n");
sys_gui("wm protocol $id WM_DELETE_WINDOW [concat playlist_cancel $id]\n");
sys_gui("label $id.label -text {PLAYLIST PROPERTIES}\n");
sys_gui("pack $id.label -side top\n");
sys_gui("frame $id.buttonframe\n");
sys_gui("pack $id.buttonframe -side bottom -fill x -pady 2m\n");
sys_gui("button $id.buttonframe.cancel -text {Cancel} -command \"playlist_cancel $id\"\n");
sys_gui("button $id.buttonframe.apply -text {Apply} -command \"playlist_apply $id\"\n");
sys_gui("button $id.buttonframe.ok -text {OK} -command \"playlist_ok $id\"\n");
sys_gui("pack $id.buttonframe.cancel -side left -expand 1\n");
sys_gui("pack $id.buttonframe.apply -side left -expand 1\n");
sys_gui("pack $id.buttonframe.ok -side left -expand 1\n");
sys_gui("frame $id.1rangef\n");
sys_gui("pack $id.1rangef -side top\n");
sys_gui("label $id.1rangef.lextension -text \"Files Extension :\"\n");
sys_gui("entry $id.1rangef.extension -textvariable $var_graph_extension -width 7\n");
sys_gui("pack $id.1rangef.lextension $id.1rangef.extension -side left\n");
sys_gui("frame $id.2rangef\n");
sys_gui("pack $id.2rangef -side top\n");
sys_gui("label $id.2rangef.lwidth -text \"Width :\"\n");
sys_gui("entry $id.2rangef.width -textvariable $var_graph_width -width 7\n");
sys_gui("pack $id.2rangef.lwidth $id.2rangef.width -side left\n");
sys_gui("frame $id.3rangef\n");
sys_gui("pack $id.3rangef -side top\n");
sys_gui("label $id.3rangef.lheight -text \"Height :\"\n");
sys_gui("entry $id.3rangef.height -textvariable $var_graph_height -width 7\n");
sys_gui("pack $id.3rangef.lheight $id.3rangef.height -side left\n");
sys_gui("frame $id.3_5rangef\n");
sys_gui("pack $id.3_5rangef -side top\n");
sys_gui("label $id.3_5rangef.lfont -text \"Font :\"\n");
sys_gui("entry $id.3_5rangef.font -textvariable $var_graph_font -width 30\n");
sys_gui("pack $id.3_5rangef.lfont $id.3_5rangef.font -side left\n");
sys_gui("frame $id.4rangef\n");
sys_gui("pack $id.4rangef -side top\n");
sys_gui("label $id.4rangef.lbgcolor -text \"Background Color :\"\n");
sys_gui("entry $id.4rangef.bgcolor -textvariable $var_graph_bgcolor -width 7\n");
sys_gui("pack $id.4rangef.lbgcolor $id.4rangef.bgcolor -side left\n");
sys_gui("frame $id.5rangef\n");
sys_gui("pack $id.5rangef -side top\n");
sys_gui("label $id.5rangef.lsbcolor -text \"Scroll Bar Color :\"\n");
sys_gui("entry $id.5rangef.sbcolor -textvariable $var_graph_sbcolor -width 7\n");
sys_gui("pack $id.5rangef.lsbcolor $id.5rangef.sbcolor -side left\n");
sys_gui("frame $id.6rangef\n");
sys_gui("pack $id.6rangef -side top\n");
sys_gui("label $id.6rangef.lfgcolor -text \"Foreground Color :\"\n");
sys_gui("entry $id.6rangef.fgcolor -textvariable $var_graph_fgcolor -width 7\n");
sys_gui("pack $id.6rangef.lfgcolor $id.6rangef.fgcolor -side left\n");
sys_gui("frame $id.7rangef\n");
sys_gui("pack $id.7rangef -side top\n");
sys_gui("label $id.7rangef.lsecolor -text \"Selection Color :\"\n");
sys_gui("entry $id.7rangef.secolor -textvariable $var_graph_secolor -width 7\n");
sys_gui("pack $id.7rangef.lsecolor $id.7rangef.secolor -side left\n");
sys_gui("bind $id.1rangef.extension <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.2rangef.width <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.3rangef.height <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.3_5rangef.font <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.4rangef.bgcolor <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.5rangef.sbcolor <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.6rangef.fgcolor <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("bind $id.7rangef.secolor <KeyPress-Return> [concat playlist_ok $id]\n");
sys_gui("}\n");
// ########### playlist procedures END -- ydegoyon@free.fr #########
